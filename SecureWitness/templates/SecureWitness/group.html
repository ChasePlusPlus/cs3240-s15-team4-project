{% extends 'SecureWitness/base.html' %}

<!DOCTYPE html>
<html>
  <head>
    <title>SecureWitness</title>
  </head>

  <body>
  <!--<form action="{% url 'SecureWitness:group' %}" method="post">-->
    {% block body_block %}
    <div class="hero-unit">
      Group page for {{ group.name }}.
      
    </div>
    <div class="container-fluid">
        {% if admin_status %}
        <div class=pull-right>
        <h3>Add Member to Group</h3>
	<form id="add_member_form" method="post" action="/SecureWitness/group/{{ group.name }}/" enctype="multipart/form-data">
            {% csrf_token %}
	    {{ add_member_form.as_p }}
	    <input type="submit" name="submitAdd" value="Add" />
	</form>
       
    
        <h3>Remove Member from Group</h3>
	<form id="remove_member_form" method="post" action="/SecureWitness/group/{{ group.name }}/" enctype="multipart/form-data">
	    {% csrf_token %}
	    {{ remove_member_form.as_p }}
	    <input type="submit" name="submitRemove" value="Remove" />
	</form>
        </div>
        {% endif %}
        {% if group %}
          <p>Members:</p>
          <ul>
	        {% for member in members %} <!-- gets all members in the group -->
	        <li><a href="/SecureWitness/userportal/{{ member }}">{{ member }}</a></li>
        	{% endfor %}
           </ul>

            {% if loggedin == 1 %}
                <p>Requests:</p>
             <!--{%  for request in requests %}
             <li><a href="/SecureWitness/{{request }}">{{ request }}</a></li>
                 <li> <input type = "submit" name = "requestChoice" value = {{ request }}> </li>
        	    {% endfor %}-->
                {% for request in requests %}
                <li><a href="/SecureWitness/userportal/{{ request.requester }}">{{ request.requester }}</a></li>
                {% endfor %}
                <!--<form action="{% url 'SecureWitness:group' group.name %}" method="post">
                {% csrf_token %}
                {% for request in requests %}
                    <input type="radio" name="request" id="request{{ forloop.counter }}" value="{{ request}}" />
                    <label for="request{{ forloop.counter }}">{{ request }}</label><br />
                {% endfor %}
                <input type="submit" value="Approve Request" />
                </form>-->

            {% else %}
                {% if request_already_made %}
                    You have requested access to this group.
                {% else %}
                    <a href="/SecureWitness/group/{{ group.name }}/request">Request to Join {{ group.name }}</a>
                {% endif %}
            {% endif %}
        {% else %}
        <p>No members in this group.</p>
         {% endif %}

    </div>
    {% endblock %}
  <!--</form>-->
  </body>
</html>
